Import CLI
===========



**To test in**: Command line interface / Insight

**Purpose of the test** is to check the import of single, multiple images and multi-images file from command line. Also, to test Inplace import and the Background import functionalities.


**Find suitable images here** [:download:`TestingSet </downloads/ImportTestingSetTable.pdf>`] or here [:download:`TestingTemplate </downloads/ImportTestingTemplate.pdf>`]

**Note that you have to download the right .zip server file (with the correct Ice version) to have the correct CLI-client for testing. You can use omego for this purpose, or download the .zip manually.**

#. Open Insight (UI), create a Dataset, note the Dataset ID

#. Go to Terminal. cd into the directory where your server runs. From there:

#. Log in onto the server you chose in step 1 as the user you chose in step 1. Import a single image without a companion file [:download:`001 </downloads/CLI_001.txt>`]

   - |C| that the file was imported using Insight UI [:ref:`ImportCLI002`]

#. Import several images in one transaction (a whole folder).[:download:`003 </downloads/CLI_003.txt>`]

   - |C| that the files were imported using Insight UI [:ref:`ImportCLI004`]

#. Import an image with a companion file e.g. ``data_repo/test_images_good/dv/CFPNEAT01_R3D.dv``, or see "Extra information" in [:download:`here </downloads/ImportTestingSetTable.pdf>`]

   - |C| that the file was imported and you can see the companion file.- Acquisition tab, Companion files [:ref:`ImportCLI005`]
   - |C| that you can download the companion file

#. Select a folder with a multi-images file (like ``test_images_good/lei``) [:download:`007 </downloads/CLI_007.txt>`][:ref:`ImportCLI006`]

   - |C| that you can see the imported images within the file

#. Try import into an existing dataset (use -d <datasetID> - use the dataset you created in step 1) - e.g. ``import -d 101 ~/Desktop/dv/CFPNEAT01_R3D.dv``
   
   - |C| the image has been imported into the right dataset

#. (non-FS only) Try archiving images at import (use -a) - e.g. ``import -a ~/Desktop/dv/CFPNEAT01_R3D.dv``

   - |C| the image has been imported and archived.

#. Import a nested folder containing Screen/Plate/Well files

#. Import a multi z/t image and a plate ``inplace``: to understand better, read the doc `here <http://www.openmicroscopy.org/private/ome-internal/investigations/2014/01/InPlace.html>`_. Do the ``inplace`` import using

   - hard link
   - soft link
   - ``ln_rm``
   - |C| that the plate and image imported well in Insight and Web

#. Find the original of the image/plate you imported ``inplace`` using soft link and remove it (try also removing individual images in plates.) 

   - |C| that when you open the image/image in a plate now in Insight & Web you get reasonable message from the UI that image is not available.
   - |C| that when you return the original file, both Insight & Web will open the inplace imported image/plate with no problem (|C| also images in a plate)

#. On an inplace imported image, perform following actions: 
   
   - Projection (in Insight)
   - Download the original file (Insight & Web)
   - Move it to another group (Insight & Web)
   - |C| that the actions proceed without error.


#. Background importing: read the doc  `here <http://www.openmicroscopy.org/private/ome-internal/investigations/2014/01/InPlace.html>`_., section ``Background importing``  to understand better.

   - Perform background import with all options mentioned in the doc.
   - |C| that the importer disconnected as expected and the images were imported okay.








	.. _ImportCLI002:
	.. figure:: /images/testing_scenarios/ImportCLI/002.png
	   :align: center

	   ImportCLI002: 


	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|


	.. _ImportCLI004:
	.. figure:: /images/testing_scenarios/ImportCLI/004.png
	   :align: center

	   ImportCLI004:


	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|


	.. _ImportCLI005:
	.. figure:: /images/testing_scenarios/ImportCLI/005.png
	   :align: center

	   ImportCLI005:


	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|


	.. _ImportCLI006:
	.. figure:: /images/testing_scenarios/ImportCLI/006.png
	   :align: center

	   ImportCLI006
	
	
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|
	|

