.. contents::
   :depth: 2

###
C++
###


**To test in**: command line

**Purpose of the test** is to make sure the C++ clients functionality is working as expected.

Setup
=====

#. Download C++ build from:

   - (if available) Download page
     \http://downloads.openmicroscopy.org/bio-formats-cpp/RELEASE_VERSION_NUMBER

   For MacOS 10.10: \http://downloads.openmicroscopy.org/bio-formats-cpp/RELEASE_VERSION_NUMBER/artifacts/xxx.Debug-MacOSX10.10.tar.xz

   - (if you are supposed to test tip of the branch) Jenkins job
     :jenkinsjob:`BIOFORMATS-CPP-5.1-merge` or
     :jenkinsjob:`BIOFORMATS-CPP-5.1-latest`

     For MacOS 10.10: pick the node ``mackerel``. You can also use the table
     of nodes on https://ci.openmicroscopy.org/computer/  to help you to find
     the right node.

#. Unpack the tar file (for example)::

    tar xfv bioformats-cpp-5.1.0-m5-Debug-MacOSX10.10.tar.xz

#. Add the Bio-Formats C++ :file:`bin` directory to your :envvar:`PATH`. For
   example, on Linux and OS X platforms::

     PATH="/path/to/bioformats-cpp/bin:$PATH"

   or on Windows, using the Command Prompt (note the quoting)::

     set "PATH=\path\to\bioformats-cpp\bin;%PATH%"

#. On Windows you also need to set the :envvar:`BIOFORMATS_HOME` environment
   variable::

     set "BIOFORMATS_HOME=\path\to\bioformats-cpp"

Tests
=====

#. On Windows, :command:`bf-test.bat` currently does not work. Assuming the
   environment variables have been set as described above, the file reading
   can be tested directly using :command:`info.exe`::

     C:\Users\<username>\Downloads\bioformats-cpp-5.1.4-ReleaseWindowsVC12-x64\libexec\ome\bioformats\info.exe path\to\test-image.ome.tiff

#. Run "bf-test" to test main wrapper:

   a. ``bf-test --version`` (should show version)
   b. ``bf-test --usage`` (should show basic usage summary)
   c. ``bf-test --help`` (should show bf-test(1) manual page)

#. Run "bf-test info" to test metadata display

   a. ``bf-test info --version`` (should show version)
   b. ``bf-test info --usage`` (should show basic usage summary)
   c. ``bf-test info --help`` (should show bf-info manual page)
   d. ``bf-test info /path/to/test-image.ome.tiff`` (should show core and original metadata)
   e. ``bf-test info --omexml /path/to/test-image.ome.tiff`` (should show and validate OME-XML metadata in addition)

#. For platform builds **only**, run "bf-test view" to view pixel data

   a. Run ``bf-test view``; a window should appear.  [MacOS X: Press Cmd-Tab twice to get menus to display]

   b. Choose :menuselection:`File --> Open` (or Ctrl-O/Cmd-O) to open an OME-TIFF image; the image should be displayed.

   c. Test each of the Zoom, Pan and Rotate view options; click and drag to change each.

   d. Test the plane navigation using the navigation sliders; the number of dimension sliders visible will depend upon the number of dimensions in the image metadata.

   e. Test the rendering by changing the Min/Max sliders

