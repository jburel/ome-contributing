.. contents::
   :depth: 2

###
C++
###


**To test in**: command line

**Purpose of the test** is to make sure the C++ clients functionality is working as expected.

Setup
=====

#. Download C++ build from:

   - (if available) Download page
     \http://downloads.openmicroscopy.org/ome-files-cpp/RELEASE_VERSION/artifacts/BUILD_NUMBER/

   - (if you are supposed to test tip of the branch) Jenkins job
     :jenkinsjob:`OME-FILES-CPP-DEV-merge` or
     :jenkinsjob:`OME-FILES-CPP-DEV-latest`

#. Unpack the tar file (for example)::

    tar xfv ome-files-platform-bundle-VERSION-Release-PLATFORM-bBUILD.tar.xz

    tar xfv ome-files-standalone-bundle-VERSION-Debug-PLATFORM-bBUILD.tar.xz

#. Add the OME Files C++ :file:`bin` directory to your :envvar:`PATH`. For
   example, on Linux and OS X platforms::

     PATH="/path/to/ome-files-cpp/bin:$PATH"

   or on Windows, using the Command Prompt (note the quoting)::

     set "PATH=\path\to\ome-files-cpp\bin;%PATH%"

#. On Windows you also need to set the :envvar:`OME_HOME` environment
   variable::

     set "OME_HOME=\path\to\ome-files-cpp"

#. For platform builds **only**, you will need to have the C++ prerequisites
   installed on your system in order to do the testing - see the
   :bf_doc:`C++ overview <developers/cpp/overview.html>` page for more
   information

Tests
=====

#. On Windows, :command:`ome-files.bat` currently does not work. Assuming the
   environment variables have been set as described above, the file reading
   can be tested directly using :command:`info.exe`::

     C:\Users\<username>\Downloads\ome-files-bundle-VERSION-PLATFORM-bBUILD\libexec\ome\files\info.exe path\to\test-image.ome.tiff

#. Run "ome-files" to test main wrapper:

   a. ``ome-files --version`` (should show version)
   b. ``ome-files --usage`` (should show basic usage summary)
   c. ``ome-files --help`` (should show ome-files(1) manual page)

#. Run "ome-files info" to test metadata display

   a. ``ome-files info --version`` (should show version)
   b. ``ome-files info --usage`` (should show basic usage summary)
   c. ``ome-files info --help`` (should show bf-info manual page)
   d. ``ome-files info /path/to/test-image.ome.tiff`` (should show core and original metadata)
   e. ``ome-files info --omexml /path/to/test-image.ome.tiff`` (should show and validate OME-XML metadata in addition)

#. For platform builds **only**, run "ome-files view" to view pixel data

   a. Run ``ome-files view``; a window should appear.  [MacOS X: Press Cmd-Tab twice to get menus to display]

   b. Choose :menuselection:`File --> Open` (or Ctrl-O/Cmd-O) to open an OME-TIFF image; the image should be displayed.

   c. Test each of the Zoom, Pan and Rotate view options; click and drag to change each.

   d. Test the plane navigation using the navigation sliders; the number of dimension sliders visible will depend upon the number of dimensions in the image metadata.

   e. Test the rendering by changing the Min/Max sliders

