Search
=======



**New UI in 5.0.3 in**: Web, Insight

**Purpose of the test** is to check that Insight and Web have the same Search UI and
return valid results with each query.
All searches below should be performed at the same time in Insight and Web and the
displayed results should be identical in both clients.


**Test defualt search**

#. Start by entering a search query in the tool-bar search box in the main client window. Type query and hit Enter or click search button.

   - |C| that you are taken to the search 'page'/UI with your search query entered into the search field, and that the search has been performed with the results appearing in the center panel.
   - |C| that the web and Insight search forms have all the same fields and that the defaults are the same.
   - |C| that the objects searched for are 'Projects', 'Datasets', 'Images', 'Screens', 'Plates' (all checkboxes selected by default).
   - |C| that no fields are chosen by default: Checkboxes for 'Name', 'Description', 'Annotations' are all unchecked.
   - |C| that the default 'Scope' for the search is "All Groups", with user "Me".
   - |C| that no date range has been chosen by default.


**Test various search queries**

#. Test single keywords by entering one word into the search field.
   - |C| that searching with a single keyword returns results where every result contains the keyword in Name, Description or Annotation.
   - |C| that same results returned by web and Insight.

#. Select to search for Name only by checking the Name checkbox. Search for single keyword.
   - |C| that all results have the keyword in their name.

#. Search for two or more keywords, separated by spaces, with Name field checked.
   - |C| that all results have one or more of the keywords in their name.
   - |C| that results with most keywords in their name are ordered first.

#. Search for two or more keywords, separated by AND, with Name field checked.
   - |C| that all results have ALL keywords in their name.

#. Search for multiple words within double quotes.
   - |C| that only results containing the quoted words are returned ** TODO: Need to clarify behviour here **

#. Use wildcards in searches, with ? replacing a single character and * replacing 1 or more characters.
   - |C| that results are consistent with this wildcard behaviour.
   - |C| that leading wildcards, where the search starts with ? or * also work.
   - |C| that wildcards work in both keywords of a 2-keyword search.

#. Try searches including various non-alphanumeric characters, including wildcards, AND and OR.
   - |C| that no exceptions are thrown.
   - |C| also test with single characters or wildcards.

#. Try search by ID: Enter a valid ID for Project, Dataset or Image, with all datatypes checked.
   - |C| that the object is returned regardless of current group or group search options.
   - |C| that if the search query matches other objects by other fields, they are also returned.
   - |C| that objects returned by ID appear at the top of search results.


**Test object types and fields**

#. Restrict the types of object you are searching for by unchecking Image, Dataset etc
   - |C| that you only get the specified object types returned.

#. Add a description to an Image, including various keywords that also exist in other Image names.
   Select Description field only. Search for keywords within the description you added.
   - |C| that the Image is returned - NB: this also confirms that the index was updated.
   - |C| that no objects are returned that don't have the search terms in their description.
   - |C| 


**Test Scope**

#. You need to be a member of several groups with a number of users in each. Each
   group needs to have some data owned by different users.
   Search with 'All Groups' chosen, and 'Me'.
   - |C| that Group for each search result is shown in results table
   - |C| that all data returned belongs to you, and is not restricted by group.

#. Search with 'All Groups' and 'All Members'.
   - |C| that data returned is not restricted by user or group.

#. Search within a specific group and 'Me'.
   - |C| that data returned belongs to you, and only comes from the specified group.

#. Search within a specified group and 'All Members'.
   - |C| that results are from the specified group and not restricted by owner.

#. Search within a specified group and user.
   - |C| that all results come from the specified group and belong to correct user.


**Test date range**

#. Enter a single 'From' date and search.
   - |C| that you cannot pick a date in the future (Web only?)
   - |C| that search results are all created after picked date.
   - |C| that you cannot search with a 'To' date before the 'From' date.
   - |C| that the 'From' date can be cleared and search is not now restricted by date

#. Enter a 'To' date only.
   - |C| that you cannot pick a date in the future (Web only?)
   - |C| that you cannot perform the search without also picking a 'From' date

#. Enter a 'From' and 'To' date.
   - |C| that all results are created between the picked dates.

