ROI Folders
===========



**To test in**: Insight

**Purpose of the test** is to check the ROI folders functionality in the ROI Tool of Insight

#. Open an image, open the ROI Tool.
#. |C| that just the folders containing ROIs are loaded into the ROI Tool Manager table.

   - in case there are no folders containing ROIs on the image at all, create some ROIs and add some to some folders, create also some empty folders
   - close the image and reopen it again, now the default loading of the folders should become obvious (i.e. only the folders containing ROIs on this particular image are loaded)

#. |C| that you can add/hide Folders to/from display using the dropdown menu ``Display ROI folders`` in top left corner (screenshot).
#. Delete a folder with subfolders and ROIs. |C| that the subfolders and the ROIs are orphaned, not deleted.
#. |C| the filtering, writing into the editable bar to the right of the ``Display ROI folders`` menu. When filtering query matches 

   - children folders, parent folder should be still visible, although the query does not match them, but sibling folders should be invisible if not matching the query.
   - parent folders, then children should be visible too although the query does not match them.

#. Verify the ``Show all ROI folders`` checkbox functionality next to the filtering box.

   - write a string into the filtering line so that you have some hits but also some folders get filtered out
   - select the ``Show all ROI folders`` checkbox, all the folders which you have on display (i.e. all folders shown by default, if not hidden by you explicitly in step 4., and all folders you have added in step 4.) are visible in the table
   - deselect the checkbox, the filtering should come back as it was before you selected the checkbox

#. |C| multiselection and right-click (i.e. that you can multiselect and get the right-click context menu to display with the multiselection still respected). 
#. Drag and Drop Folders and ROIs to and out of other folders. 
#. |C| that the selected folder(s) are in a newly created folder in case ``Create folder`` was executed
#. |C| that the number in the bracket behind the folder name is showing the number of children, be it ROIs or Folders
#. |C| that you can add ROIs to folders imported in an xml header of an ome-tiff
#. |C| visibility-non-visiblity behaviour for the folders

   - have some ROIs in one folder only, then deselect the checkbox ``Visible`` next to the folder (right hand side of the table) and |C| that the ROIs disappear from the image
   - have some ROIs in two or more folders (i.e. some ROIs having 2 or more parents) and |C| that when you deselect the checkbox ``Visible`` on only one parent folder, the ROIs are still visible in the image. Only when you deselect the checkbox on all the parent folders, the contained ROIs become invisible.

#. |C| that you can Create, Delete, Edit and Move folder (right-click menu)
#. |C| that you can draw new ROIs and add to Folder, Remove from Folder, Delete, Propagate, Duplicate, Merge, Split and Tag them to the folders (existing and new)
#. |C| that when you select a Shape, you can see in the Inspector tab the containing folder.
#. (|C| that you have folder ID, Name and Description in the Inspector tab of the ROI Tool. - probably impossible to implement)
