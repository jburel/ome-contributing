Virtual Microscope Testing
==========================


**Production server**: <https://learning.openmicroscopy.org/dundee/>
**Staging server**: <https://ray.openmicroscopy.org/dundee/>

**Public Gallery on production server**: <https://learning.openmicroscopy.org/dundee/gallery/>
**Public Gallery on staging server**: <https://ray.openmicroscopy.org/dundee/gallery/>


**Purpose of the test** is to check the functioning of the Virtual Microscope.


#. Testing cache
    -  All urls matching ``webclient/render_*`` and ``webgateway/*`` are cached for1 minute to simplify testing
    -  Either use Firebug, development tools in your web browser or open console to check response using ``$ curl -I  https://ray.openmicroscopy.org/dundee/webgateway/img_detail/1293/``

       ``$ curl -I https://ray.openmicroscopy.org/dundee/webgateway/img_detail/1293/``
       ``HTTP/1.1 200 OK``
       ``Server: nginx/1.4.2``
       ``Date: Thu, 26 Nov 2015 11:11:04 GMT``
       ``Content-Type: text/html; charset=utf-8``
       ``Connection: keep-alive``
       ``Vary: Cookie``
       ``Set-Cookie: sessionid_staging-virtual-microscope=wsuzpgcj7dxmltxoiwuklmtbz7zrd38g; httponly; Path=/``
       ``X-Proxy-Cache: HIT``

       ``$ curl -X GET -I https://ray.openmicroscopy.org/dundee/ ``
       ``Cache-Control: max-age=0``
       ``X-Proxy-Cache: BYPASS``

       ``$ curl -X GET -I https://ray.openmicroscopy.org/dundee/static/webclient/image/logo_login_web.png``
       ``Cache-Control: max-age=2592000``

    -  ``X-Proxy-Cache`` can show various status:
        -  HIT = data loaded from cache
        -  MISS = no data in cache, reload url
        -  BYPASS = this url bypass cache
        -  EXPIRED = cache expired, reload url

#. Public gallery testing
    -  |C| in the top menu bar that you are not logged in as a Public User (in case you are logged in as yourself or other user, then just logout and navigate to the page again). Note that this is a known unrelated problem, just make sure you are logged in as Public User (see ticket <https://trac.openmicroscopy.org/ome/ticket/12991>).
    -  |C| if you see only 4 images in public examples.
    -  Double click on each slide and open full viewer. Zoom in and out. Load ROIs if possible.


#. General testing

   -  Log in using your UoD LDAP credentials. The login name should be case insensitive. |C| that when you try various combinations of upper and lower case, you can still log in.
   -  |C| if group/user menu display "All courses" and name of courses only.
   -  Choose one of the courses from the list. Check if you ended up viewing data belonging to the user named as a course.
   -  Browse through each catalog and see if the slides' thumbnails load.
   -  Click on each slide and see if the metadata panels load. Please note that preview is turned off.
   -  |C| if download button is restricted to Render as JPEG/PNG/TIFF only. Download raw data should be disabled.
   -  |C| if you cannot delete tags.
   -  |C| if you cannot download original data.
   -  |C| if scripts are disabled and there is no script listed in Script menu. Note that Script button is still available in Metadata Panel but it should throw an exception.
   -  Double click on each slide and open full viewer. Zoom in and out. Load ROIs if possible.

