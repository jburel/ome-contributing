.. contents::
   :depth: 2


###############
Map Annotations
###############




**To test in**: Insight, Web

**Purpose of the test** is to make sure the Map Annotations functionality is working okay for both annotations on your images as well as on other users' images (permissions permitting).


**Note**: Although you can copy and paste lines from a Map Annotation to create a new Map Annotation, this newly created Map Annotation is not the same as the one from which you copied the lines from, you are creating a completely new object with such action. 

Map Annotations - basic
=======================


#. Create a new Map Annotation

   - Find the Map Annotations table in the right-hand pane (``General`` tab, last of the ``Annotations`` section).
   - Start typing into the boxes (which say ``Add Key``, ``Add Value`` and hit Enter after you have finished with the particular box or mouse-click into the next box.

#. Adding new rows
    
   - Select the last row of the Map Annotation you have just created or of another already present Map Annotation.
   - Click Plus
   - |C| that row at the bottom of the table is added.
   - Click Plus again
   - |C| that another row at the bottom of the table is added.
   - Select a middle row
   - Click Plus
   - |C| that a new row under the selected one was added.


#. Editing fields

   - Click (once) into a field (e.g. the Key field in the first row)
   - |C| that you can start typing
   - Press Tab key.
   - |C| that you are now editing a next field (e.g. the Value field in the first row) or that a new row was created (when in the second column before pressing Tab) and you are editing the field in the first column of the newly created row.
   - edit fields again, do not hit Enter, Tab or Save but navigate to another object and back and |C| that the editing changes in the field have been saved.

#. Select by 

   - Find the ``Show All`` menu in the right-hand pane next to (Web) or just under (Insight) the label ``Annotations``.
   - Select ``Show added by others`` and ``Show added by me`` and
   - |C| that the Map Annotations are filtered accordingly.


Map Annotations - permissions
=============================


**Note** that the setup is usually done in such a manner that you DO NOT HAVE TO LOGOUT and LOGIN as some other user. You should be able to do all the work sticking to the user prescribed for you in the testing sheet. The Map Annotations of other users on your data will be prepared for you to work on.


#. |C| the testing sheet for the user you should log in as and the groups you should work on!

#. |C| the testing sheet for the data (belonging to which user) you should be working on!

#. Edit

   - copy line(s) from one Map Annotation and paste them to another (not yours) Map Annotation
   - copy and cut line(s) from one Map Annotation and paste them to another (yours) Map Annotation
   - add lines to Map Annotation (not yours)
   - edit fields of Map Annotations (not yours), write new text into them, (Insight only) hit Save (in the row of icons on top of left-hand pane) and |C| the Save action proceeded.
   - edit fields again, do not hit Enter, Tab or Save but navigate to another object and back and |C| that the editing changes in the field have been saved.
   - delete (not too much, you will  still need plenty of data!) rows in Map Annotations (not yours - be wise, do not delete too much, leave plenty Map Annotations for next steps!)

#. Create

   - |C| the testing spreadsheet for information whether you can create a new Map Annotation in the particular group type.
   - Try to create new Map Annotations in both allowed and non-allowed situations, checking that the allowed situations work, whereas the non-allowed do not. 
   - Paste line(s) from one Map Annotation to create a new Map Annotation on an object which has no Map Annotations of yours yet (no lines are pre-populated on the object with no Map Annotation, just the line ``Add Key`` and ``Add Value`` is present.)

#. AFTER Edit & Create actions:

   - |C| the testing spreadsheet for information whether you can delete a new Map Annotation in the particular group type.
   - Try to delete new Map Annotations in both allowed and non-allowed situations, checking that the allowed situations work, whereas the non-allowed do not. 
   - Delete (do not delete everything, one or two tests  are enough!) some Map Annotations (meaning all rows) from NOT YOURs Map Annotations.
   - Delete (do not delete everything, one or two tests  are enough!) some Map Annotations (meaning all rows) from YOURs Map Annotations which are on the same object as some other (not yours) annotations.

#. AFTER Delete actions:
  
   - |C| and note down what Map Annotations you have on the objects which you are going to Move.
   - Move some doubly-annotated objects (with both your and not-your Map Annotations on them) to the same level group (e.g. from Read-Annotate-1 group move to Read-Annotate-2 group)
   - |C| that Map Annotations are left on the objects as long as the owner of the Map Annotations is a member of the target group except for PRIVATE target group (there only the Map Annotations of the owner of the data are preserved) - see the testing sheet for details in your case.
   - |C| that no errors occur.
   - Move again the objects you moved in the first step - check the testing sheet for the order of moves.
   - |C| after each step that the Map Annotations are preserved and no errors occur.




